# Домашнее задание к занятию "Основы работы с Asterisk"

### Цель задания

В результате выполнения задания вы научитесь:  

1. Установливать Asterisk на виртуальной машине
2. Настраивать учетные записи для регистрации на данном сервере
3. Настраивать простейшую маршрутизацию вызова между внутренними абонентами данной АТС

------

### Инструкция к выполнению домашнего задания

1. Сделайте копию [Шаблона для домашнего задания](https://docs.google.com/document/d/1youKpKm_JrC0UzDyUslIZW2E2bIv5OVlm_TQDvH5Pvs/edit) себе на Google Disk.
2. В названии файла введите корректное название лекции и вашу фамилию и имя.
3. Зайдите в “Настройки доступа” и выберите доступ “Просматривать могут все в Интернете, у кого есть ссылка”.  Ссылка на инструкцию [Как предоставить доступ к файлам и папкам на Google Диске](https://support.google.com/docs/answer/2494822?hl=ru&co=GENIE.Platform%3DDesktop)
4. Скопируйте текст задания в свой документ.
5. Выполните домашнее задание, запишите ответы и приложите необходимые скриншоты в свой Google Doc.
6. Для проверки домашнего задания преподавателем отправьте ссылку на ваш документ в личном кабинете.
7. Любые вопросы по решению задач задавайте в чате учебной группы.

------

 ### Подготовка
 
 1. Скачайте текущую версию Asterisk из репозитория http://downloads.asterisk.org/pub/telephony/asterisk/asterisk-16-current-patch.tar.gz
 2. В каталоге, куда были загружены исходники найти и выполнить скрипт по установке необходимых для asterisk пакетов - его можно найти в каталоге /contrib/scripts/install_prereq install
 3. В каталоге, куда были загружены исходники выполнить ./configure 
 4. Выполнить make menuselect
 5. Выбрав необходимые модули для сборки, нажмите "Save & Exit"
 6. Выполните make && make install && make samples && ldconfig
 7. Выполните /usr/sbin/asterisk
 
------

### Настройка внутренних номеров.
 
### Задание 1. 

В файле sip.conf настроить две учетные записи [1001] и [1002] по образцу ниже:
 
 [XXXX]
type=friend 
secret=XXXXXXX 
context=XXXXXX 
host=dynamic
disallow=all 
allow=ulaw,alaw 
nat=no
directmedia=no 
qualify=yes

В secret должен быть указан пароль, а в качестве context - название контекста диалплана, в котором будут обрабатывать звонки.

В [general] нужно определелить context по умолчанию - назовем его "from-internal"

*      *

------

### Задание 2. 

В файле extensions.conf настроить обработку вызовов в контексте по умолчанию "from-internal"

[from-internal]
exten => _X.,1,Dial(SIP/${EXTEN})
same => n,Hangup 

*       *

------

### Правила приема домашнего задания

В личном кабинете отправлены:

- ссылка на документ (Google Doc) с выполненным заданием. В документе настроены права доступа “Просматривать могут все в Интернете, у кого есть ссылка”;
- файл в формате .png или .jpg.


### Критерии оценки

Зачет - выполнены все задания, ответы даны в развернутой форме, приложены соответствующие скриншоты и файлы проекта, в выполненных заданиях нет противоречий и нарушения логики.

На доработку - задание выполнено частично или не выполнено, в логике выполнения заданий есть противоречия, существенные недостатки.
